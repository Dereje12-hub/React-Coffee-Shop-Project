{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.remoteDevtoolsSecurityHeadersMiddleware = void 0;\n\nfunction remoteDevtoolsSecurityHeadersMiddleware(req, res, next) {\n  if (typeof req.headers.origin === 'string' && !req.headers.origin.match(/^https?:\\/\\/localhost:/) && !req.headers.origin.match(/^https:\\/\\/chrome-devtools-frontend\\.appspot\\.com/)) {\n    next(new Error(\"Unauthorized request from \" + req.headers.origin + \". \" + 'This may happen because of a conflicting browser extension to intercept HTTP requests. ' + 'Please try again without browser extensions or using incognito mode.'));\n    return;\n  }\n\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n  next();\n}\n\nexports.remoteDevtoolsSecurityHeadersMiddleware = remoteDevtoolsSecurityHeadersMiddleware;","map":{"version":3,"sources":["../../src/middleware/remoteDevtoolsSecurityHeadersMiddleware.ts"],"names":[],"mappings":";;;;;;;AAIA,SAAgB,uCAAhB,CACE,GADF,EAEE,GAFF,EAGE,IAHF,EAG6B;AAG3B,MACE,OAAO,GAAG,CAAC,OAAJ,CAAY,MAAnB,KAA8B,QAA9B,IACA,CAAC,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,KAAnB,CAAyB,wBAAzB,CADD,IAEA,CAAC,GAAG,CAAC,OAAJ,CAAY,MAAZ,CAAmB,KAAnB,CAAyB,mDAAzB,CAHH,EAIE;AACA,IAAA,IAAI,CACF,IAAI,KAAJ,CACE,+BAA6B,GAAG,CAAC,OAAJ,CAAY,MAAzC,UACE,yFADF,GAEE,sEAHJ,CADE,CAAJ;AAOA;AACD;;AAGD,EAAA,GAAG,CAAC,SAAJ,CAAc,wBAAd,EAAwC,SAAxC;AAEA,EAAA,IAAI;AACL;;AAzBD,OAAA,CAAA,uCAAA,GAAA,uCAAA","sourcesContent":["import type { IncomingMessage, ServerResponse } from 'http';\n\n// Like securityHeadersMiddleware but further allow cross-origin requests\n// from https://chrome-devtools-frontend.appspot.com/\nexport function remoteDevtoolsSecurityHeadersMiddleware(\n  req: IncomingMessage,\n  res: ServerResponse,\n  next: (err?: Error) => void\n) {\n  // Block any cross origin request.\n  if (\n    typeof req.headers.origin === 'string' &&\n    !req.headers.origin.match(/^https?:\\/\\/localhost:/) &&\n    !req.headers.origin.match(/^https:\\/\\/chrome-devtools-frontend\\.appspot\\.com/)\n  ) {\n    next(\n      new Error(\n        `Unauthorized request from ${req.headers.origin}. ` +\n          'This may happen because of a conflicting browser extension to intercept HTTP requests. ' +\n          'Please try again without browser extensions or using incognito mode.'\n      )\n    );\n    return;\n  }\n\n  // Block MIME-type sniffing.\n  res.setHeader('X-Content-Type-Options', 'nosniff');\n\n  next();\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}