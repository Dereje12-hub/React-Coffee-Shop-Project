{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getBabelError = void 0;\n\nvar chalk_1 = __importDefault(require(\"chalk\"));\n\nvar WebpackFileError_1 = require(\"./WebpackFileError\");\n\nfunction getBabelError(fileName, err) {\n  if (err.code !== 'BABEL_PARSE_ERROR') {\n    return false;\n  }\n\n  if (err.loc) {\n    var lineNumber = Math.max(1, err.loc.line);\n    var column = Math.max(1, err.loc.column);\n    var message = err.message.replace(/^.+?: /, '').replace(new RegExp(\"[^\\\\S\\\\r\\\\n]*\\\\(\" + lineNumber + \":\" + column + \"\\\\)[^\\\\S\\\\r\\\\n]*\"), '');\n    return new WebpackFileError_1.WebpackFileError({\n      filePath: fileName,\n      line: lineNumber,\n      col: column\n    }, chalk_1.default.red.bold('Syntax error').concat(\": \" + message));\n  }\n\n  return false;\n}\n\nexports.getBabelError = getBabelError;","map":{"version":3,"sources":["../../../src/plugins/ExpectedErrors/parseBabelError.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAWA,IAAA,OAAA,GAAA,eAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AAEA,IAAA,kBAAA,GAAA,OAAA,sBAAA;;AAEA,SAAgB,aAAhB,CACE,QADF,EAEE,GAFF,EAKG;AAED,MAAI,GAAG,CAAC,IAAJ,KAAa,mBAAjB,EAAsC;AACpC,WAAO,KAAP;AACD;;AAED,MAAI,GAAG,CAAC,GAAR,EAAa;AACX,QAAM,UAAU,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,GAAG,CAAC,GAAJ,CAAQ,IAApB,CAAnB;AACA,QAAM,MAAM,GAAG,IAAI,CAAC,GAAL,CAAS,CAAT,EAAY,GAAG,CAAC,GAAJ,CAAQ,MAApB,CAAf;AAEA,QAAM,OAAO,GAAG,GAAG,CAAC,OAAJ,CAEb,OAFa,CAEL,QAFK,EAEK,EAFL,EAIb,OAJa,CAIL,IAAI,MAAJ,sBAA8B,UAA9B,SAA4C,MAA5C,sBAJK,EAIkE,EAJlE,CAAhB;AAMA,WAAO,IAAI,kBAAA,CAAA,gBAAJ,CACL;AACE,MAAA,QAAQ,EAAE,QADZ;AAEE,MAAA,IAAI,EAAE,UAFR;AAGE,MAAA,GAAG,EAAE;AAHP,KADK,EAML,OAAA,CAAA,OAAA,CAAM,GAAN,CAAU,IAAV,CAAe,cAAf,EAA+B,MAA/B,QAA2C,OAA3C,CANK,CAAP;AAQD;;AAED,SAAO,KAAP;AACD;;AAhCD,OAAA,CAAA,aAAA,GAAA,aAAA","sourcesContent":["/**\n * Copyright (c) 2021 Expo, Inc.\n * Copyright (c) 2021 Vercel, Inc.\n * Copyright 2014-present Sebastian McKenzie and other contributors\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * Based on https://github.com/vercel/next.js/blob/1552b8341e5b512a2827485a4a9689cd429c520e/packages/next/build/webpack/plugins/wellknown-errors-plugin/parseBabel.ts\n * Based on https://github.com/babel/babel/blob/34693d6024da3f026534dd8d569f97ac0109602e/packages/babel-core/src/parser/index.js\n */\nimport chalk from 'chalk';\n\nimport { WebpackFileError } from './WebpackFileError';\n\nexport function getBabelError(\n  fileName: string,\n  err: Error & {\n    code?: 'BABEL_PARSE_ERROR';\n    loc?: { line: number; column: number };\n  }\n): WebpackFileError | false {\n  if (err.code !== 'BABEL_PARSE_ERROR') {\n    return false;\n  }\n\n  if (err.loc) {\n    const lineNumber = Math.max(1, err.loc.line);\n    const column = Math.max(1, err.loc.column);\n\n    const message = err.message\n      // Remove file information, which instead is provided by webpack.\n      .replace(/^.+?: /, '')\n      // Remove column information from message\n      .replace(new RegExp(`[^\\\\S\\\\r\\\\n]*\\\\(${lineNumber}:${column}\\\\)[^\\\\S\\\\r\\\\n]*`), '');\n\n    return new WebpackFileError(\n      {\n        filePath: fileName,\n        line: lineNumber,\n        col: column,\n      },\n      chalk.red.bold('Syntax error').concat(`: ${message}`)\n    );\n  }\n\n  return false;\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}