{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function get() {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) {\n    if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n  }\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compositeImagesAsync = exports.Cache = exports.generateFaviconAsync = exports.generateImageAsync = exports.sharpAsync = exports.isAvailableAsync = exports.findSharpInstanceAsync = exports.jimpAsync = exports.imageAsync = void 0;\n\nvar Cache = __importStar(require(\"./Cache\"));\n\nexports.Cache = Cache;\n\nvar Image_1 = require(\"./Image\");\n\nObject.defineProperty(exports, \"compositeImagesAsync\", {\n  enumerable: true,\n  get: function get() {\n    return Image_1.compositeImagesAsync;\n  }\n});\nObject.defineProperty(exports, \"generateFaviconAsync\", {\n  enumerable: true,\n  get: function get() {\n    return Image_1.generateFaviconAsync;\n  }\n});\nObject.defineProperty(exports, \"generateImageAsync\", {\n  enumerable: true,\n  get: function get() {\n    return Image_1.generateImageAsync;\n  }\n});\n\nvar jimp_1 = require(\"./jimp\");\n\nObject.defineProperty(exports, \"jimpAsync\", {\n  enumerable: true,\n  get: function get() {\n    return jimp_1.jimpAsync;\n  }\n});\n\nvar sharp_1 = require(\"./sharp\");\n\nObject.defineProperty(exports, \"findSharpInstanceAsync\", {\n  enumerable: true,\n  get: function get() {\n    return sharp_1.findSharpInstanceAsync;\n  }\n});\nObject.defineProperty(exports, \"isAvailableAsync\", {\n  enumerable: true,\n  get: function get() {\n    return sharp_1.isAvailableAsync;\n  }\n});\nObject.defineProperty(exports, \"sharpAsync\", {\n  enumerable: true,\n  get: function get() {\n    return sharp_1.sharpAsync;\n  }\n});\n\nfunction imageAsync(options) {\n  var commands,\n      _args = arguments;\n  return _regeneratorRuntime.async(function imageAsync$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          commands = _args.length > 1 && _args[1] !== undefined ? _args[1] : [];\n          _context.next = 3;\n          return _regeneratorRuntime.awrap(sharp_1.isAvailableAsync());\n\n        case 3:\n          if (!_context.sent) {\n            _context.next = 5;\n            break;\n          }\n\n          return _context.abrupt(\"return\", sharp_1.sharpAsync(options, commands));\n\n        case 5:\n          return _context.abrupt(\"return\", jimp_1.jimpAsync(_objectSpread(_objectSpread({}, options), {}, {\n            format: jimp_1.convertFormat(options.format),\n            originalInput: options.input\n          }), commands));\n\n        case 6:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, null, Promise);\n}\n\nexports.imageAsync = imageAsync;","map":{"version":3,"sources":["../src/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAA,KAAA,GAAA,YAAA,CAAA,OAAA,WAAA,CAAA;;AA2BE,OAAA,CAAA,KAAA,GAAA,KAAA;;AA1BF,IAAA,OAAA,GAAA,OAAA,WAAA;;AA2BE,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,sBAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WA3BO,OAAA,CAAA,oBA2BP;AA3B2B;AA2B3B,CAAA;AAFA,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,sBAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WAzB6B,OAAA,CAAA,oBAyB7B;AAzBiD;AAyBjD,CAAA;AADA,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,oBAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WAxBmD,OAAA,CAAA,kBAwBnD;AAxBqE;AAwBrE,CAAA;;AAtBF,IAAA,MAAA,GAAA,OAAA,UAAA;;AAkBE,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,WAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WAlBsB,MAAA,CAAA,SAkBtB;AAlB+B;AAkB/B,CAAA;;AAjBF,IAAA,OAAA,GAAA,OAAA,WAAA;;AAkBE,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,wBAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WAlBO,OAAA,CAAA,sBAkBP;AAlB6B;AAkB7B,CAAA;AACA,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,kBAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WAnB+B,OAAA,CAAA,gBAmB/B;AAnB+C;AAmB/C,CAAA;AACA,MAAA,CAAA,cAAA,CAAA,OAAA,EAAA,YAAA,EAAA;AAAA,EAAA,UAAA,EAAA,IAAA;AAAA,EAAA,GAAA,EAAA,eAAA;AAAA,WApBiD,OAAA,CAAA,UAoBjD;AApB2D;AAoB3D,CAAA;;AAjBK,SAAe,UAAf,CACL,OADK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEL,UAAA,QAFK,2DAE6B,EAF7B;AAAA;AAAA,2CAIK,OAAA,CAAA,gBAAA,EAJL;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA,2CAKI,OAAA,CAAA,UAAA,CAAW,OAAX,EAAoB,QAApB,CALJ;;AAAA;AAAA,2CAOE,MAAA,CAAA,SAAA,iCACA,OADA;AACS,YAAA,MAAM,EAAE,MAAA,CAAA,aAAA,CAAc,OAAO,CAAC,MAAtB,CADjB;AACgD,YAAA,aAAa,EAAE,OAAO,CAAC;AADvE,cAEL,QAFK,CAPF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAP,OAAA,CAAA,UAAA,GAAA,UAAA","sourcesContent":["import * as Cache from './Cache';\nimport { compositeImagesAsync, generateFaviconAsync, generateImageAsync } from './Image';\nimport { ImageFormat, ImageOptions, ResizeMode } from './Image.types';\nimport { convertFormat, jimpAsync } from './jimp';\nimport { findSharpInstanceAsync, isAvailableAsync, sharpAsync } from './sharp';\nimport { SharpCommandOptions, SharpGlobalOptions } from './sharp.types';\n\nexport async function imageAsync(\n  options: SharpGlobalOptions,\n  commands: SharpCommandOptions[] = []\n) {\n  if (await isAvailableAsync()) {\n    return sharpAsync(options, commands);\n  }\n  return jimpAsync(\n    { ...options, format: convertFormat(options.format), originalInput: options.input },\n    commands\n  );\n}\n\nexport {\n  jimpAsync,\n  findSharpInstanceAsync,\n  isAvailableAsync,\n  sharpAsync,\n  generateImageAsync,\n  generateFaviconAsync,\n  Cache,\n  compositeImagesAsync,\n};\n\nexport { SharpGlobalOptions, SharpCommandOptions, ResizeMode, ImageFormat, ImageOptions };\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}